{"ast":null,"code":"var _jsxFileName = \"/Users/mczarnecki/dev/weather-start/src/components/App.js\";\nimport React, { Component } from \"react\";\nimport Form from \"./Form\";\nimport Result from \"./Result\";\nimport \"./App.css\";\n\n//Klucz do API\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst APIKey = \"252e8c27dcfaa488285a50772a492cec\";\nclass App extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      value: \"Warszawa\",\n      date: \"\",\n      city: \"\",\n      sunrise: \"\",\n      sunset: \"\",\n      temp: \"\",\n      pressure: \"\",\n      wind: \"\",\n      err: false\n    };\n    this.handleInputChange = e => {\n      this.setState({\n        value: e.target.value\n      });\n    };\n    this.handleCitySubmit = e => {\n      console.log(\"potwierdzony form\");\n      e.preventDefault(); // powstrzymaj domysle zachowanie forma - odswiezenie (na submit)\n\n      const API = `https://api.openweathermap.org/data/2.5/weather?q=${this.state.value}&appid=${APIKey}`;\n      fetch(API).then(response => {\n        if (response.ok) {\n          return response;\n        }\n        throw Error(\"Blad! Nie udalo sie pobrac danych\");\n      }).then(response => response.json()).then(data => {\n        const currentTime = new Date().toLocaleString;\n        this.setState(prevState => ({\n          err: false,\n          date: currentTime,\n          city: this.state.value,\n          sunrise: data.sys.sunrise,\n          sunset: data.sys.sunset,\n          temp: data.main.temp,\n          pressure: data.main.pressure,\n          wind: data.speed\n        }));\n      }).catch(err => {\n        console.log(err);\n        this.setState(prevState => ({\n          err: true,\n          city: this.state.value\n        }));\n      });\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        value: this.state.value,\n        change: this.handleInputChange,\n        submit: this.handleCitySubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Result, {\n        error: this.state.err\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Component","Form","Result","APIKey","App","state","value","date","city","sunrise","sunset","temp","pressure","wind","err","handleInputChange","e","setState","target","handleCitySubmit","console","log","preventDefault","API","fetch","then","response","ok","Error","json","data","currentTime","Date","toLocaleString","prevState","sys","main","speed","catch","render"],"sources":["/Users/mczarnecki/dev/weather-start/src/components/App.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport Form from \"./Form\";\nimport Result from \"./Result\";\nimport \"./App.css\";\n\n//Klucz do API\nconst APIKey = \"252e8c27dcfaa488285a50772a492cec\";\n\nclass App extends Component {\n  state = {\n    value: \"Warszawa\",\n    date: \"\",\n    city: \"\",\n    sunrise: \"\",\n    sunset: \"\",\n    temp: \"\",\n    pressure: \"\",\n    wind: \"\",\n    err: false,\n  };\n\n  handleInputChange = (e) => {\n    this.setState({\n      value: e.target.value,\n    });\n  };\n\n  handleCitySubmit = (e) => {\n    console.log(\"potwierdzony form\");\n    e.preventDefault(); // powstrzymaj domysle zachowanie forma - odswiezenie (na submit)\n\n    const API = `https://api.openweathermap.org/data/2.5/weather?q=${this.state.value}&appid=${APIKey}`;\n\n    fetch(API)\n      .then((response) => {\n        if (response.ok) {\n          return response;\n        }\n        throw Error(\"Blad! Nie udalo sie pobrac danych\");\n      })\n      .then((response) => response.json())\n      .then((data) => {\n        const currentTime = new Date().toLocaleString;\n\n        this.setState(prevState => ({\n            err: false,\n            date: currentTime,\n            city: this.state.value,\n            sunrise: data.sys.sunrise,\n            sunset: data.sys.sunset,\n            temp: data.main.temp,\n            pressure: data.main.pressure,\n            wind: data.speed,\n          }))\n\n      })\n      .catch((err) => {\n        console.log(err);\n\n        this.setState( prevState => ({\n          err: true,\n          city: this.state.value\n        }));\n\n      });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Form\n          value={this.state.value}\n          change={this.handleInputChange}\n          submit={this.handleCitySubmit}\n        />\n        <Result error={this.state.err} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,IAAI,MAAM,QAAQ;AACzB,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAO,WAAW;;AAElB;AAAA;AACA,MAAMC,MAAM,GAAG,kCAAkC;AAEjD,MAAMC,GAAG,SAASJ,SAAS,CAAC;EAAA;IAAA;IAAA,KAC1BK,KAAK,GAAG;MACNC,KAAK,EAAE,UAAU;MACjBC,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE,EAAE;MACRC,OAAO,EAAE,EAAE;MACXC,MAAM,EAAE,EAAE;MACVC,IAAI,EAAE,EAAE;MACRC,QAAQ,EAAE,EAAE;MACZC,IAAI,EAAE,EAAE;MACRC,GAAG,EAAE;IACP,CAAC;IAAA,KAEDC,iBAAiB,GAAIC,CAAC,IAAK;MACzB,IAAI,CAACC,QAAQ,CAAC;QACZX,KAAK,EAAEU,CAAC,CAACE,MAAM,CAACZ;MAClB,CAAC,CAAC;IACJ,CAAC;IAAA,KAEDa,gBAAgB,GAAIH,CAAC,IAAK;MACxBI,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;MAChCL,CAAC,CAACM,cAAc,EAAE,CAAC,CAAC;;MAEpB,MAAMC,GAAG,GAAI,qDAAoD,IAAI,CAAClB,KAAK,CAACC,KAAM,UAASH,MAAO,EAAC;MAEnGqB,KAAK,CAACD,GAAG,CAAC,CACPE,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACC,EAAE,EAAE;UACf,OAAOD,QAAQ;QACjB;QACA,MAAME,KAAK,CAAC,mCAAmC,CAAC;MAClD,CAAC,CAAC,CACDH,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACG,IAAI,EAAE,CAAC,CACnCJ,IAAI,CAAEK,IAAI,IAAK;QACd,MAAMC,WAAW,GAAG,IAAIC,IAAI,EAAE,CAACC,cAAc;QAE7C,IAAI,CAAChB,QAAQ,CAACiB,SAAS,KAAK;UACxBpB,GAAG,EAAE,KAAK;UACVP,IAAI,EAAEwB,WAAW;UACjBvB,IAAI,EAAE,IAAI,CAACH,KAAK,CAACC,KAAK;UACtBG,OAAO,EAAEqB,IAAI,CAACK,GAAG,CAAC1B,OAAO;UACzBC,MAAM,EAAEoB,IAAI,CAACK,GAAG,CAACzB,MAAM;UACvBC,IAAI,EAAEmB,IAAI,CAACM,IAAI,CAACzB,IAAI;UACpBC,QAAQ,EAAEkB,IAAI,CAACM,IAAI,CAACxB,QAAQ;UAC5BC,IAAI,EAAEiB,IAAI,CAACO;QACb,CAAC,CAAC,CAAC;MAEP,CAAC,CAAC,CACDC,KAAK,CAAExB,GAAG,IAAK;QACdM,OAAO,CAACC,GAAG,CAACP,GAAG,CAAC;QAEhB,IAAI,CAACG,QAAQ,CAAEiB,SAAS,KAAK;UAC3BpB,GAAG,EAAE,IAAI;UACTN,IAAI,EAAE,IAAI,CAACH,KAAK,CAACC;QACnB,CAAC,CAAC,CAAC;MAEL,CAAC,CAAC;IACN,CAAC;EAAA;EAEDiC,MAAM,GAAG;IACP,oBACE;MAAK,SAAS,EAAC,KAAK;MAAA,wBAClB,QAAC,IAAI;QACH,KAAK,EAAE,IAAI,CAAClC,KAAK,CAACC,KAAM;QACxB,MAAM,EAAE,IAAI,CAACS,iBAAkB;QAC/B,MAAM,EAAE,IAAI,CAACI;MAAiB;QAAA;QAAA;QAAA;MAAA,QAC9B,eACF,QAAC,MAAM;QAAC,KAAK,EAAE,IAAI,CAACd,KAAK,CAACS;MAAI;QAAA;QAAA;QAAA;MAAA,QAAG;IAAA;MAAA;MAAA;MAAA;IAAA,QAC7B;EAEV;AACF;AAEA,eAAeV,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}